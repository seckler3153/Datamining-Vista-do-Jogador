<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Placares Secretos - Datamining</title>
	<link rel="icon" type="image/png" href="Ícone 11 - Datamine.png">
    <style>
        body {
            background-color: #11806A;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 40px;
            font-family: Arial, sans-serif;
            gap: 20px;
        }

        .card-branco {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 8px solid #000;
            display: flex;
            gap: 40px;
            flex-shrink: 0;
        }

        .apendice-regras {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            border: 8px solid #000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            width: 350px;
            max-height: 85vh;
            overflow-y: auto;
            position: sticky;
            top: 40px;
        }

        .apendice-regras h2 {
            margin-top: 0;
            text-align: center;
            text-decoration: underline;
            font-size: 20px;
            text-transform: uppercase;
        }

        .apendice-regras ul { padding-left: 20px; margin: 0; }
        .apendice-regras li { margin-bottom: 10px; font-size: 13px; line-height: 1.4; font-weight: bold; }

        .grid-principal {
            display: grid;
            grid-template-columns: repeat(2, 1fr); 
            gap: 20px 40px;
        }

        .bloco-jogador {
            border-bottom: 2px dashed #ccc;
            padding-bottom: 15px;
            transition: opacity 0.3s ease;
        }
        
        .grid-principal .bloco-jogador:nth-last-child(1),
        .grid-principal .bloco-jogador:nth-last-child(2) { border-bottom: none; }

        .bloco-jogador.desativado {
            opacity: 0.5;
            pointer-events: none;
            filter: grayscale(0.5);
        }

        .header-jogador {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 10px;
        }

        .header-top { display: flex; align-items: center; gap: 10px; position: relative; }

        .nome-jogador {
            font-size: 22px;
            font-weight: bold;
            color: black;
            text-decoration: underline;
            outline: none;
            min-width: 120px;
        }

        .button-grid {
            display: grid;
            grid-auto-columns: 1fr;
            grid-auto-flow: column;
            gap: 4px;
            width: 100%;
        }

        .btn-sel {
            padding: 6px 2px;
            font-family: Arial, sans-serif;
            font-size: 10px;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid #000;
            background: #fff;
            color: #000;
            text-transform: uppercase;
            transition: 0.2s;
        }

        .btn-sel:hover { background: #eee; }
        .btn-sel.active { background: #11806A; color: white; border-color: #000; }

        /* MENU DE CORES */
        .color-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 130px;
            background: white;
            border: 2px solid black;
            z-index: 100;
            flex-direction: column;
            width: 100px;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.2);
        }

        .color-menu button {
            border: none;
            padding: 5px;
            cursor: pointer;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            text-align: left;
            background: white;
        }

        .color-menu button:hover { background: #eee; }

        .container-dados-jogador {
            display: inline-block;
        }

        .grid-icones {
            display: grid;
            grid-template-columns: repeat(3, 54px); 
            justify-items: center;
            align-items: center;
            margin-bottom: 2px;
        }

        .pasta { width: 44px; height: 32px; display: flex; justify-content: center; align-items: center; }
        .folder-img { width: 100%; height: 100%; object-fit: contain; }
        .divisoria-v { width: 20px; height: 30px; display: flex; justify-content: center; align-items: center; }
        .divisoria-v img { width: 100%; height: 100%; object-fit: contain; }

        .tabela { border-collapse: collapse; border: 3px solid black; margin: 0; }
        .celula {
            width: 50px; height: 45px;
            border: 2px solid black;
            text-align: center; font-size: 24px;
            font-weight: bold; color: black; outline: none;
        }

        .bg-rosa { background-color: #FF69B4; }
        .bg-verde { background-color: #00FF00; }
        .bg-ciano { background-color: #40E0D0; }
        .bg-vermelho { background-color: #FF4D4D; }

        .referencia-container {
            border-left: 5px solid #000;
            padding-left: 40px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 250px;
        }

        .seletor-item {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #000;
        }

        .checkbox-coop {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            font-weight: bold;
        }

        .bloco-meta {
            padding-bottom: 20px;
            border-bottom: 2px dashed #000;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .btn-reset {
            margin-top: 10px;
            padding: 12px;
            background-color: #ff4d4d;
            color: white;
            border: 3px solid black;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
        }

        .modo-coop-ativo .grid-principal .container-dados-jogador { opacity: 0.5; pointer-events: none; }
        .modo-pvp-ativo #player-block-grupo, .modo-pvp-ativo .checkbox-coop { opacity: 0.5; pointer-events: none; }
        .hidden { display: none !important; }
        
        #container-grupo { display: flex; justify-content: center; }
    </style>
</head>
<body>

<div class="card-branco modo-pvp-ativo" id="main-card">
    <div class="grid-principal" id="grid-jogadores"></div>

    <div class="referencia-container">
        <div class="seletor-item">
            <label style="display: block; font-weight: bold; margin-bottom: 5px; font-size: 11px; text-align: center;">MODO DE JOGO</label>
            <div class="button-grid" id="row-modo">
                <button class="btn-sel active" onclick="selecionarModo('pvp')">PvP</button>
                <button class="btn-sel" onclick="selecionarModo('coop')">Coop</button>
            </div>
        </div>

        <div class="seletor-item">
            <label style="display: block; font-weight: bold; margin-bottom: 5px; font-size: 11px; text-align: center;">DIFICULDADE</label>
            <div class="button-grid" id="btns-diff-pvp">
                <button class="btn-sel" onclick="selecionarDificuldade('muito fácil')">M.Fácil</button>
                <button class="btn-sel" onclick="selecionarDificuldade('fácil')">Fácil</button>
                <button class="btn-sel active" onclick="selecionarDificuldade('normal')">Normal</button>
                <button class="btn-sel" onclick="selecionarDificuldade('difícil')">Difícil</button>
                <button class="btn-sel" onclick="selecionarDificuldade('extremo')">Extr.</button>
            </div>
            <div class="button-grid hidden" id="btns-diff-coop">
                <button class="btn-sel" onclick="selecionarDificuldade('fácil')">Fácil</button>
                <button class="btn-sel active" onclick="selecionarDificuldade('normal')">Normal</button>
                <button class="btn-sel" onclick="selecionarDificuldade('difícil')">Difícil</button>
            </div>
        </div>

        <div class="seletor-item">
            <label style="display: block; font-weight: bold; margin-bottom: 5px; font-size: 11px; text-align: center;">QTD. JOGADORES</label>
            <div class="button-grid" id="row-qtd">
                <button class="btn-sel" onclick="selecionarQtd(3)">3</button>
                <button class="btn-sel" onclick="selecionarQtd(4)">4</button>
                <button class="btn-sel" onclick="selecionarQtd(5)">5</button>
                <button class="btn-sel" onclick="selecionarQtd(6)">6</button>
                <button class="btn-sel" onclick="selecionarQtd(7)">7</button>
                <button class="btn-sel active" onclick="selecionarQtd(8)">8</button>
            </div>
        </div>

        <div class="bloco-meta">
            <h3 style="text-align: center; margin-top: 0; font-size: 16px;">ARQUIVO VITAL</h3>
            <div class="container-dados-jogador">
                <div class="grid-icones">
                    <div class="pasta"><img src="Ícone 7 - Keycard.png" class="folder-img"></div>
                    <div class="divisoria-v"><img src="Ícone 1 - V.png"></div>
                    <div class="pasta"><img src="Ícone 9 - Arquivo Vital.png" class="folder-img"></div>
                </div>
                <table class="tabela">
                    <tr>
                        <td class="celula bg-rosa" id="rosa-dir" contenteditable="true" oninput="atualizarTodos()">2</td>
                        <td class="celula bg-verde" id="verde-dir" contenteditable="true" oninput="atualizarTodos()">5</td>
                        <td class="celula bg-vermelho" contenteditable="true">A1</td>
                    </tr>
                </table>
            </div>
        </div>

        <div id="container-grupo"></div>
        <button class="btn-reset" onclick="resetarValores()">Resetar Placares</button>
    </div>
</div>

<div class="apendice-regras">
    <h2 id="titulo-regras">Regras</h2>
    <ul id="lista-regras"></ul>
</div>

<script>
    let modoAtual = 'pvp';
    let diffAtual = 'normal';
    
    const regrasTexto = {
        pvp: {
            'muito fácil': ["Recomendado: Máximo 4 jogadores.", "Mapa 5x5 (sem pastas de Chave de Acesso).", "Mapa completo (sem espaços vazios).", "Sem caminhos bloqueados no início.", "SO informa distância e caminhos.", "Zonas Seguras fixas e informadas individualmente.", "Recebe +A e +B simultaneamente.", "Sem limite de uso de Recursos.", "Sem pastas de Quarentena.", "Downloads: -2B (Mín. 1B)."],
            'fácil': ["Recomendado: Máximo 5 jogadores.", "Mapa 7x7 (1 pasta de Chave de Acesso).", "Diretório Principal: Acesso no 3V.", "Sem caminhos bloqueados no início.", "SO informa distância e caminhos.", "Zonas Seguras fixas e informadas individualmente.", "Recebe +A e +B simultaneamente.", "Limite: 2 Recursos por turno.", "Sem pastas de Quarentena.", "Downloads: -1B (Mín. 1B)."],
            'normal': ["Recomendado: 3 a 6 jogadores.", "Mapa 9x9 (2 pastas de Chave de Acesso).", "Diretório Principal: Acesso no 5V.", "Caminhos podem começar bloqueados.", "SO informa distância e caminhos.", "Zonas Seguras fixas e informadas individualmente.", "Limite: 1 Recurso por turno.", "1 pasta de Quarentena no mapa.", "Downloads: Preços normais."],
            'difícil': ["Recomendado: 4 a 6 jogadores.", "Mapa 12x12 (3 pastas de Chave de Acesso).", "Diretório Principal: Acesso no 7V.", "Mais caminhos bloqueados.", "SO NÃO informa distância ou caminhos.", "Zonas Seguras fixas, mas início não informado.", "Limite: 1 Recurso por turno.", "2 pastas de Quarentena (1 turno preso).", "Downloads: +1B."],
            'extremo': ["Recomendado: 6 a 8 jogadores.", "Mapa 15x15 (5 pastas de Chave de Acesso).", "Diretório Principal: Acesso no 10V.", "Muitos caminhos bloqueados.", "SO NÃO informa distância ou caminhos.", "Zonas Seguras móveis e início oculto.", "Caminhos diagonais não necessariamente em 45º.", "Limite: 1 Recurso por rodada.", "Perdas de A ou B duplicadas.", "Estoque de Downloads reduzido.", "4 pastas de Quarentena (2 turnos preso).", "Downloads: +3B."]
        },
        coop: {
            'fácil': ["Recomendado: Máximo 4 jogadores.", "Mapa 9x9 (2 pastas de Chave de Acesso).", "Diretório Principal: Acesso no 3V.", "Sem caminhos bloqueados no início.", "Limite: 1 Recurso do grupo por turno.", "SO informa distância e caminhos.", "Zonas Seguras fixas e informadas.", "Grupo recebe +A e +B simultaneamente.", "Roleta Arquivo Desconhecido toda rodada.", "1 pasta de Quarentena.", "Nova Zona Segura: 6B.", "Downloads: -2B (Mín. 1B)."],
            'normal': ["Recomendado: 3 a 6 jogadores.", "Mapa 12x12 (3 pastas de Chave de Acesso).", "Diretório Principal: Acesso no 5V.", "Caminhos podem começar bloqueados.", "Limite: 1 Recurso do grupo por turno.", "SO informa distância e caminhos.", "Zonas Seguras fixas e informadas.", "Roleta Arquivo Desconhecido toda rodada.", "2 pastas de Quarentena (1 turno preso).", "Nova Zona Segura: 8B.", "Downloads: Preço normal."],
            'difícil': ["Recomendado: 5 a 8 jogadores.", "Mapa 15x15 (5 pastas de Chave de Acesso).", "Diretório Principal: Acesso no 7V.", "Muitos caminhos bloqueados.", "Perdas de A ou B duplicadas.", "Limite: 1 Recurso do grupo por rodada.", "SO NÃO informa distância ou caminhos.", "Início não informado.", "Caminhos diagonais não necessariamente em 45º.", "Roleta de Quarentena toda rodada.", "4 pastas de Quarentena (2 turnos preso).", "Nova Zona Segura: 12B.", "Downloads: +3B."]
        }
    };

    const tabelaDificuldade = {
        pvp: { 'muito fácil': [0, 0], 'fácil': [1, 3], 'normal': [2, 5], 'difícil': [3, 7], 'extremo': [5, 10] },
        coop: { 'fácil': [2, 3], 'normal': [3, 5], 'difícil': [5, 7] }
    };

    function selecionarModo(val) {
        modoAtual = val;
        document.getElementById('main-card').className = `card-branco modo-${val}-ativo`;
        if(val === 'pvp') {
            document.getElementById('btns-diff-pvp').classList.remove('hidden');
            document.getElementById('btns-diff-coop').classList.add('hidden');
        } else {
            document.getElementById('btns-diff-pvp').classList.add('hidden');
            document.getElementById('btns-diff-coop').classList.remove('hidden');
        }
        atualizarVisualBotoes('row-modo', val);
        selecionarDificuldade('normal');
    }

    function selecionarDificuldade(val) {
        diffAtual = val;
        const gridId = modoAtual === 'pvp' ? 'btns-diff-pvp' : 'btns-diff-coop';
        atualizarVisualBotoes(gridId, val);
        const valores = tabelaDificuldade[modoAtual][val];
        if (valores) {
            document.getElementById('rosa-dir').innerText = valores[0];
            document.getElementById('verde-dir').innerText = valores[1];
            atualizarTodos();
        }
        const titulo = document.getElementById('titulo-regras');
        const lista = document.getElementById('lista-regras');
        titulo.innerText = `${modoAtual.toUpperCase()} - ${val.toUpperCase()}`;
        lista.innerHTML = '';
        if (regrasTexto[modoAtual][val]) {
            regrasTexto[modoAtual][val].forEach(regra => {
                const li = document.createElement('li');
                li.innerText = regra;
                lista.appendChild(li);
            });
        }
    }

    function selecionarQtd(val) {
        atualizarVisualBotoes('row-qtd', val.toString());
        for(let i=1; i<=8; i++) {
            const bloco = document.getElementById(`player-block-${i}`);
            if (bloco) i > val ? bloco.classList.add('desativado') : bloco.classList.remove('desativado');
        }
    }

    function atualizarVisualBotoes(containerId, value) {
        const btns = document.getElementById(containerId).querySelectorAll('.btn-sel');
        btns.forEach(btn => {
            const btnText = btn.innerText.toLowerCase();
            if(btnText === value || (value === 'muito fácil' && btnText === 'm.fácil') || (value === 'extremo' && btnText === 'extr.') || btnText === value.toString()) {
                btn.classList.add('active');
            } else { btn.classList.remove('active'); }
        });
    }

    function toggleColorMenu(id) {
        const menu = document.getElementById(`menu-cor-${id}`);
        const isVisible = menu.style.display === 'flex';
        document.querySelectorAll('.color-menu').forEach(m => m.style.display = 'none');
        menu.style.display = isVisible ? 'none' : 'flex';
    }

    function mudarCor(id, cor) {
        document.getElementById(`nome-${id}`).style.color = cor;
        document.getElementById(`menu-cor-${id}`).style.display = 'none';
    }

    function gerarJogador(id, nomePadrao, simplificado = false) {
        const nomeFinal = nomePadrao || `Jogador ${id}`;
        const headerExtras = simplificado ? '' : `
            <button class="btn-sel" onclick="toggleColorMenu('${id}')" style="width: 50px;">COR</button>
            <div class="color-menu" id="menu-cor-${id}">
                <button onclick="mudarCor('${id}', 'black')">Padrão</button>
                <button onclick="mudarCor('${id}', 'red')">Vermelho</button>
                <button onclick="mudarCor('${id}', 'orange')">Laranja</button>
                <button onclick="mudarCor('${id}', 'yellow')">Amarelo</button>
                <button onclick="mudarCor('${id}', 'green')">Verde</button>
                <button onclick="mudarCor('${id}', 'cyan')">Ciano</button>
                <button onclick="mudarCor('${id}', 'darkblue')">Azul</button>
                <button onclick="mudarCor('${id}', 'purple')">Roxo</button>
                <button onclick="mudarCor('${id}', 'magenta')">Magenta</button>
            </div>`;
        const tickBox = simplificado ? '' : `
            <div class="checkbox-coop">
                <input type="checkbox" class="check-jogador" id="check-${id}"> <label for="check-${id}">Já jogou esta rodada</label>
            </div>`;
        return `
        <div class="bloco-jogador" id="player-block-${id}">
            <div class="header-jogador">
                <div class="header-top">
                    <div id="nome-${id}" class="nome-jogador" contenteditable="true">${nomeFinal}</div>
                    ${headerExtras}
                </div>
                ${tickBox}
            </div>
            <div class="container-dados-jogador">
                <div class="grid-icones">
                    <div class="pasta"><img src="Ícone 7 - Keycard.png" class="folder-img"></div>
                    <div class="divisoria-v"><img src="Ícone 1 - V.png"></div>
                    <div class="pasta"><img src="Ícone 8 - Shop.png" class="folder-img"></div>
                </div>
                <table class="tabela">
                    <tr>
                        <td class="celula bg-rosa" id="rEsq-${id}" contenteditable="true" oninput="atualizarTodos()">0</td>
                        <td class="celula bg-verde" id="vEsq-${id}" contenteditable="true" oninput="atualizarTodos()">1</td>
                        <td class="celula bg-ciano" id="azul-${id}">C</td>
                    </tr>
                </table>
            </div>
        </div>`;
    }

    function atualizarTodos() {
        const rDir = parseInt(document.getElementById('rosa-dir').innerText) || 0;
        const vDir = parseInt(document.getElementById('verde-dir').innerText) || 0;
        const rMeta = Math.ceil(rDir / 2);
        const vMeta = Math.ceil(vDir / 2);
        const ids = [...Array.from({length: 8}, (_, i) => i + 1), 'grupo'];
        ids.forEach(id => {
            const rEsq = parseInt(document.getElementById(`rEsq-${id}`).innerText) || 0;
            const vEsq = parseInt(document.getElementById(`vEsq-${id}`).innerText) || 0;
            const azulCell = document.getElementById(`azul-${id}`);
            if (!azulCell) return;
            if (rEsq < rMeta && vEsq < vMeta) azulCell.innerText = "C";
            else if ((rEsq >= rDir && vEsq >= vDir) || (rEsq >= rDir && vEsq >= vMeta) || (vEsq >= vDir && rEsq >= rMeta)) azulCell.innerText = "R";
            else azulCell.innerText = "I";
        });
    }

    function resetarValores() {
        if(!confirm("Deseja resetar os valores das Chaves de Acesso e Versão dos Jogadores/do Grupo?")) return;
        const ids = [...Array.from({length: 8}, (_, i) => i + 1), 'grupo'];
        ids.forEach(id => {
            document.getElementById(`rEsq-${id}`).innerText = "0";
            document.getElementById(`vEsq-${id}`).innerText = "1";
        });
        document.querySelectorAll('.check-jogador').forEach(cb => cb.checked = false);
        selecionarDificuldade(diffAtual);
    }

    // Atalhos de teclado
    document.addEventListener('keydown', function(event) {
        if (modoAtual === 'coop') {
            const checkboxes = document.querySelectorAll('.check-jogador');
            if (event.key === 'Enter') {
                event.preventDefault(); 
                checkboxes.forEach(cb => cb.checked = true);
            } 
            else if (event.code === 'Space') {
                event.preventDefault(); 
                checkboxes.forEach(cb => cb.checked = false);
            }
        }
    });

    window.onload = () => {
        const grid = document.getElementById('grid-jogadores');
        for(let i=1; i<=8; i++) grid.innerHTML += gerarJogador(i);
        document.getElementById('container-grupo').innerHTML = gerarJogador('grupo', 'Grupo', true);
        selecionarModo('pvp');
        selecionarQtd(8);
        
        document.addEventListener('click', (e) => {
            if (!e.target.matches('.btn-sel')) {
                document.querySelectorAll('.color-menu').forEach(m => m.style.display = 'none');
            }
        });
    };
</script>
</body>
</html>